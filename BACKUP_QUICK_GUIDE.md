# 备份导入导出功能 - 快速使用指南

## 功能概览

本系统提供了完整的备份导入导出功能，确保您的数据安全无忧。

## 如何使用

### 📤 导出备份（备份数据）

1. 登录后台管理系统
2. 点击左侧菜单的"版本管理"
3. 点击右上角的"**备份数据**"按钮
4. 在弹出的确认框中点击"确定"
5. 等待备份完成，会显示"数据备份成功"

备份文件会自动保存在服务器 `data/backups/` 目录中，文件名格式为：`full_backup_20260114_120000.json`

### 📥 导入备份（恢复数据）

#### 方法一：从历史备份恢复

1. 登录后台管理系统
2. 点击左侧菜单的"版本管理"
3. 在"备份历史"列表中找到要恢复的备份
4. 点击该备份的"**下载**"按钮
5. 点击右上角的"**导入备份**"按钮
6. 选择刚才下载的备份文件（.json格式）
7. 确认导入操作
8. 等待导入完成，系统会自动刷新

#### 方法二：从外部文件恢复

1. 登录后台管理系统
2. 点击左侧菜单的"版本管理"
3. 点击右上角的"**导入备份**"按钮
4. 选择您的备份文件（.json格式）
5. 系统会验证文件格式和文件名
6. 确认导入操作（会有警告提示）
7. 等待导入完成，查看详细的导入结果
8. 系统会自动刷新页面显示恢复的数据

### 📋 查看备份历史

1. 登录后台管理系统
2. 点击左侧菜单的"版本管理"
3. 向下滚动到"备份历史"区域
4. 可以看到所有备份文件的信息：
   - 文件名
   - 文件大小
   - 创建时间
   - 备份版本
   - 包含的数据类型

### ⬇️ 下载备份文件

1. 登录后台管理系统
2. 点击左侧菜单的"版本管理"
3. 在"备份历史"中找到要下载的备份
4. 点击该备份的"**下载**"按钮
5. 备份文件会自动下载到您的电脑

## 备份文件格式

### 标准备份文件
文件名格式：`full_backup_YYYYmmdd_HHiiss.json`

例如：`full_backup_20260114_120000.json`

### 备份内容
备份文件包含以下数据：
- **config** - 网站配置（标题、描述、颜色等）
- **profile** - 个人信息（头像、简介、技术栈等）
- **sites** - 旗下站点列表
- **friends** - 友情链接列表

### 数据结构
```json
{
    "version": "1.0.0",
    "timestamp": "2026-01-14T12:00:00+08:00",
    "files": {
        "config": { ... },
        "profile": { ... },
        "sites": { ... },
        "friends": { ... }
    }
}
```

## 安全特性

### ✅ 自动备份保护
- 导入数据前，系统会自动备份当前数据
- 备份文件保存在 `data/backups/` 目录
- 文件名格式：`{type}_import_backup_YYYYmmdd_HHiiss.json`

### ✅ 数据验证
- 文件必须是 JSON 格式
- 文件大小不能超过 50MB
- 必须包含完整的备份结构
- 版本号和时间戳格式验证

### ✅ 错误隔离
- 单个文件导入失败不会影响其他文件
- 提供详细的错误信息
- 不会破坏现有数据

### ✅ 认证保护
- 所有操作需要登录
- API 接口有认证保护

## 重要提示

### 🚨 导入前请注意

1. **确认备份文件来源可靠**
   - 只导入自己创建或信任的备份文件
   - 检查备份文件的创建时间和版本

2. **导入会覆盖现有数据**
   - 系统会在导入前自动备份当前数据
   - 如有重要数据未保存，请先手动备份

3. **检查导入结果**
   - 导入完成后查看详细信息
   - 确认所有文件都已成功导入
   - 如有警告信息，请仔细检查

### 💾 备份建议

1. **定期备份**
   - 建议每周至少备份一次
   - 在重要数据更新前备份

2. **保留多个备份**
   - 系统自动保留最近 5 个完整备份
   - 建议下载重要备份到外部存储

3. **命名规范**
   - 使用标准的备份文件名格式
   - 可以在文件名中添加日期说明

4. **测试导入**
   - 定期测试备份文件的导入功能
   - 确保备份文件可用

### 🔧 故障排除

#### 导入失败怎么办？

1. **检查文件格式**
   - 确保文件是 .json 格式
   - 尝试用文本编辑器打开文件查看内容

2. **检查文件大小**
   - 确保文件大小不超过 50MB
   - 大文件可以尝试压缩后备份

3. **查看错误信息**
   - 系统会提供详细的错误提示
   - 根据错误信息进行相应处理

4. **检查备份结构**
   - 文件必须包含：version, timestamp, files
   - 每个文件的数据必须是数组

5. **联系技术支持**
   - 如果问题持续，检查服务器日志
   - 确认文件权限和目录可写性

## 使用场景

### 适合使用备份功能的场景：

1. **数据迁移**
   - 从一台服务器迁移到另一台服务器
   - 恢复到之前的某个时间点

2. **数据恢复**
   - 误操作删除数据后恢复
   - 系统升级失败后回滚

3. **数据存档**
   - 定期保存历史数据
   - 保存重要的数据快照

4. **测试环境**
   - 在测试环境恢复生产数据
   - 数据分析前创建快照

### 不适合使用备份功能的场景：

1. **实时同步** - 备份文件是静态快照，不适合实时同步
2. **增量备份** - 系统只支持完整备份，不支持增量
3. **数据共享** - 备份文件包含敏感信息，不适合直接分享

## 常见问题

### Q: 备份文件占多少空间？
A: 取决于您的数据量，一般在 5-20 KB 之间。

### Q: 最多保留多少个备份？
A: 系统自动保留最近 5 个完整备份，但您可以手动下载和保存。

### Q: 可以导入其他系统的备份吗？
A: 只能导入本系统导出的备份文件，或相同格式的 JSON 文件。

### Q: 导入失败会丢失数据吗？
A: 不会。导入前系统会自动备份当前数据，如果导入失败，原始数据不会丢失。

### Q: 可以部分导入吗？
A: 系统会验证并导入备份文件中所有有效的数据文件。如果某个文件验证失败，不会影响其他文件的导入。

### Q: 导入需要多长时间？
A: 通常在 1-5 秒内完成，取决于备份文件大小和网络速度。

### Q: 可以同时导入多个备份吗？
A: 不可以，每次只能导入一个备份文件。

## 技术支持

如果您在使用过程中遇到问题，请：
1. 查看本文档的故障排除部分
2. 检查服务器日志文件
3. 确认文件权限和目录设置
4. 联系系统管理员

---

**最后更新**: 2026-01-14
**版本**: 1.0.0
